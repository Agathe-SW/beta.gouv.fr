---
layout: null
---

{ "links":
    { "self": "{{ site.url }}/startups" }
, "data":
    [
    {% for startup in site.startups %}
        {% assign startup_id = startup.id | remove: '/startups/' %}
        {% assign screenshot_files = site.static_files | where: "startups_img", true %}
        {% assign screenshot_file = screenshot_files | where: 'basename', startup_id | first %}

        {% if screenshot_file %}
          {% assign screenshot_path = screenshot_file.path %}
        {% else %}
          {% assign screenshot_path = "/img/logo-generique-startup-rectangle-2019.jpg" %}
        {% endif %}
        { "id"        : "{{ startup.id | remove: '/startups/' }}"
        , "type"      : "startup"
        , "attributes":
            { "name"  : "{{ startup.title }}"
            , "pitch" : "{{ startup.mission }}"{% if startup.stats %}
            , "stats_url": "{% if startup.stats_url %}{{ startup.stats_url }}{% else %}{{ startup.link | strip }}/stats{% endif %}"{% endif %}{% if startup.link %}
            , "link": "{{ startup.link}}"{% endif %}{% if startup.repository %}
            , "repository": "{{ startup.repository}}"{% endif %}
            , "contact": "{{startup.contact}}"
            , "owner" : "{{ startup.owner | escape }}"
            , "content_url_encoded_markdown": "{{startup.content_url_encoded_markdown}}"
            , "screenshot-url": "{{ screenshot_path }}"
            , "events": [
                {% for event in startup.events %}
                    { "name": "{{event.name}}", "date": "{{event.date}}", "comment": "{{event.comment}}"}{% unless forloop.last %},{% endunless %}
                {% endfor %}
                ]
            , "phases": [
                {% for phase in startup.phases %}
                    { "name": "{{phase.name}}", "start": "{{phase.start}}", "end": "{{phase.end}}"}{% unless forloop.last %},{% endunless %}
                {% endfor %}
                ]
            }
        , "relationships":
            { "incubator":
                { "data": { "type": "incubator", "id": "{{ startup.incubator}}" }
                }
            }
        }
        {% unless forloop.last %},{% endunless %}
    {% endfor %}
    ]
, "included":
    [
    {% for incubator in site.incubators %}
        { "id"        : "{{ incubator.id | remove:'/incubateurs/approche' }}"
        , "type"      : "incubator"
        , "attributes":
            { "title"  : "{{ incubator.title }}"
            , "owner"  : "{{ incubator.owner }}"
            , "website": "{{ incubator.website }}"
            , "github" : "{{ incubator.github }}"
            , "contact": "{{ incubator.contact }}"
            }
        }
        {% unless forloop.last %},{% endunless %}
    {% endfor %}
    ]

}
